version: '2'
services:
  back:
    build:
      context: high-way-to-devops
      dockerfile: Dockerfile
    image: back
    container_name: back
    ports:
      - "8070:8080"
  front:
    build:
      context: high-way-to-devops-front
      dockerfile: Dockerfile
    container_name: front
    image: front
    links:
      - back:back-api
    ports:
      - "8072:80"
    volumes:
      - ./high-way-to-devops-front/conf:/etc/nginx/conf.d/
  jenkins:
    container_name: jenkins
    image: jenkins/jenkins
    user: root
    ports:
      - "9010:8080"
    volumes:
      - jenkins_data/:/var/jenkins_home
  sonarqube:
    container_name: sonarqube
    image: sonarqube:7.8-community
    ports:
      - "9011:9000"

volumes:
  jenkins_data:
  sonar_data:
